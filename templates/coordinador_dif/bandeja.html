{% extends "base.html" %}

{% block main_content %}
    
    <aside class="right-side">
        
        <section class="content-header">
            <h1>Categorizaci&oacute;n <small>Bandeja de trabajo</small> </h1>
                <ol class="breadcrumb">
                <li><a href="/"> Inicio</a></li>
                <li class="active"><i class="fa fa-star-half-o"></i>Categorización</li> <!--Editar icono -->
            </ol>
        </section>

        <section class="content">

            <div class="box box-danger">
                <div class="box-body">

                    <div class="row title">
                        <div class="col-xs-2 col-xs-offset-10">
                            <a id="activar_buscar_modal" href="#" class="btn btn-primary btn-flat pull-right col-xs-12">
                                Buscar &nbsp;&nbsp;<i class="fa fa-search"></i>
                            </a>
                        </div>
                    </div>
                    <br>

                    <div class="row">
                        <div class="col-xs-12">

                            <table 
                            class="table table-striped table-partner table-hover text-center">
                                
                                <thead>
                                    <tr>
                                        <th>Fecha</th>
                                        <th>RIF</th>
                                        <th>RTN</th>
                                        <th>Raz&oacute;n social</th>
                                        <th>Inspector</th>
                                        <th>Categorizaci&oacute;n</th>
                                        <th>Estatus</th>
                                        <th>Opciones</th>
                                    </tr>
                                </thead>

                                <tbody>                                    
                                    
                                    <tr id="0">
                                        <td>11-12-2014</td>
                                        <td>J-123456</td>
                                        <td>123456</td>
                                        <td>Hotel XYZ</td>
                                        <td id="inspectores_agregados">
                                            <span id="sub0">
                                                <span>Ricardo Arana</span>
                                            <a class="quitar-analista">
                                               <span>X</span> 
                                            </a>
                                            </span><br>
                                            <span id="sub1">
                                                <span>Fermina Daza</span>
                                            <a class="quitar-analista">
                                               <span>X</span> 
                                            </a>
                                            </span>
                                        </td>
                                        <td id="inspectores_agregados">
                                            <span class="text-red">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                            </span>
                                            <span class="text-gray">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>    
                                            </span>                                        
                                        </td>
                                        <td>
                                            <label data-toggle="tooltip" title="Revisi&oacute;n del informe t&eacute;cnico" class="label label-warning etiqueta-estatus">Revisi&oacute;n</label>
                                        </td>
                                        <td>
                                            <div class="btn-group">
                                                <a href="#" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                                                    <i class="fa fa-eye icon-white"></i>
                                                    <span class="caret"></span>
                                                </a> 
                                                <ul class="dropdown-menu  pull-right" role="menu">
                                                    <li><a href="#" class="activar-modal-oficio">No Conformidades y Recomendaciones</a></li>
                                                    <li><a href="#" class="activar-modal-insp-pdf">Informe t&eacute;cnico</a></li>
                                                </ul>
                                            </div>                                                   
                                            <a data-toggle="tooltip" title="Agregar inspector" href="#" class="btn btn-info activar-modal-inspectores disabled">
                                                <i class="fa fa-plus-square icon-white "></i> 
                                            </a>
                                            <a data-toggle="tooltip" title="Ver credencial" href="#" class="btn btn-info activar-modal-credenciales">
                                               <i class="fa fa-certificate icon-white"></i> 
                                            </a>
                                            <div class="btn-group">                                                  
                                                <a id="btn_0" href="#" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                                                    <i class="fa fa-bars icon-white"></i>&nbsp;
                                                    <span class="caret"></span>
                                                </a>
                                                <ul class="dropdown-menu  pull-right" role="menu">
                                                    <li><a data-row="0" class ="aprobar" href="#">Aprobar informe t&eacute;cnico</a></li>
                                                    <li><a data-row="0" class="devolver-observaciones" href="#">Devolver con observaciones</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr id="1">
                                        <td>11-12-2014</td>
                                        <td>J-345267</td>
                                        <td>123456</td>
                                        <td>Posada Turpial</td>
                                        <td id="inspectores_agregados">
                                        </td>
                                        <td>
                                        <span class="text-red">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>
                                        </span>
                                        <span class="text-gray">
                                            <i class="fa fa-star"></i>
                                            <i class="fa fa-star"></i>    
                                        </span>                                        
                                        </td>
                                        <td>
                                            <label data-toggle="tooltip" title="Por asignar inspector" class="label label-warning etiqueta-estatus">Por asignar</label>
                                        </td>
                                        <td>
                                            <div class="btn-group">
                                                <a href="#" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                                                    <i class="fa fa-eye icon-white"></i>
                                                    <span class="caret"></span>
                                                </a>   
                                                <ul class="dropdown-menu  pull-right" role="menu">
                                                    <li><a href="#" class="activar-modal-oficio">No Conformidades y Recomendaciones</a></li>
                                                </ul>
                                            </div>                                                 
                                            <a data-toggle="tooltip" title="Agregar inspector"  href="#" class="add-button btn btn-info activar-modal-inspectores">
                                                <i class="fa fa-plus-square icon-white"></i> 
                                            </a>
                                            <a data-toggle="tooltip" title="Otorgar credencial" href="#" class="btn btn-info otorgar-credenciales">
                                                <i class="fa fa-cog icon-white"></i>
                                            </a>
                                            <div class="btn-group">                                                  
                                                <a id="btn_0" href="#" class="btn btn-info dropdown-toggle disabled" data-toggle="dropdown">
                                                    <i class="fa fa-bars icon-white"></i>&nbsp;
                                                    <span class="caret"></span>
                                                </a>
                                                <ul class="dropdown-menu  pull-right" role="menu">
                                                    <li><a data-row="0" class ="aprobar"href="#">Aprobar informe t&eacute;cnico</a></li>
                                                    <li><a data-row="0" class="devolver-observaciones" href="#">Devolver con observaciones</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr> 
                                    
                                    <tr id="2">
                                        <td>11-12-2014</td>
                                        <td>J-963277</td>
                                        <td>123456</td>
                                        <td>Hotel ABC</td>
                                        <td id="inspectores_agregados">
                                            <span id="sub0">
                                                <span>Federico Rojas</span><br/>
                                            </span>
                                            <span id="sub1">
                                                <span>Andr&eacute;s Parra</span>
                                            </span>
                                        </td>
                                         <td>
                                            <span class="text-red">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                            </span>
                                            <span class="text-gray">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>    
                                            </span>                                        
                                        </td>
                                        <td>
                                            <label data-toggle="tooltip" title="En inspecci&oacute;n" class="label label-warning etiqueta-estatus">En inspecci&oacute;n</label>
                                        </td>
                                        <td>
                                            <div class="btn-group">
                                                <a href="#" class="btn btn-info dropdown-toggle" data-toggle="dropdown">
                                                    <i class="fa fa-eye icon-white"></i>
                                                    <span class="caret"></span>
                                                </a>
                                                <ul class="dropdown-menu  pull-right" role="menu">
                                                    <li><a href="#" class="activar-modal-insp-pdf">No Conformidades y Recomendaciones</a></li>
                                                </ul>
                                            </div>                                                    
                                            <a data-toggle="tooltip" title="Agregar inspector" href="#" class="btn btn-info activar-modal-inspectores disabled">
                                                <i class="fa fa-plus-square icon-white"></i> 
                                            </a>                                            
                                            <a data-toggle="tooltip" title="Ver credencial" href="#" class="btn btn-info activar-modal-credenciales">
                                                <i class="fa fa-certificate icon-white"></i>
                                            </a>
                                            <div class="btn-group">                                                  
                                                <a id="btn_0" href="#" class="btn btn-info dropdown-toggle disabled" data-toggle="dropdown">
                                                    <i class="fa fa-bars icon-white"></i>&nbsp;
                                                    <span class="caret"></span>
                                                </a>
                                                <ul class="dropdown-menu  pull-right" role="menu">
                                                    <li><a data-row="0" class ="aprobar"href="#">Aprobar informe t&eacute;cnico</a></li>
                                                    <li><a data-row="0" class="devolver-observaciones" href="#">Devolver con observaciones</a></li>
                                                </ul>
                                            </div>
                                        </td>
                                    </tr>
                                    
                                </tbody>    
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </aside>

    <div class="modal fade" id="asignar-inspector-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">Asignar Inspectores</h4>
                </div>
                
                <div class="modal-body">
                    <table id="tabla_inspectores" class="table table-modal text-center">
                        <thead>
                            <tr class="label-info">
                                <th>Inspectores</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                    <div id="inspectores_vacios" class="text-center text-danger" style="display:none">No hay inspectores disponibles</div>
                </div>

                <div class="modal-footer">
                    <div class="col-xs-6">
                        <a href="#" class="btn btn-danger col-xs-12" data-dismiss="modal">Cancelar</a>
                    </div>
                    <div class="col-xs-6">
                        <a id="asignar-inspector" href="#" class="btn btn-primary col-xs-12" data-dismiss="modal">Agregar</a>
                    </div>
                </div>

            </div>
        </div>
    </div>

    {% include '_modales_categorizacion.html' %}

{% endblock %}

{% block javascripts %}
    {{ block.super }}
    <script type="application/javascript">
        $(function() {

            var modal_padre;

            $('.activar-modal-oficio').click(function(){
                $('#ver-documento-pdf').modal({
                });
            });

            $('.activar-modal-insp-pdf').click(function(){
                $('#ver-documento-pdf').modal({
                    keyboard: false,
                    backdrop: 'static'
                });
            });
            
            $('#boton-cancelar-observacion').click(function(){
                $('#ingresar-observaciones').modal('hide');
                $('#'+modal_padre).modal('show');
            });

            $('#boton-enviar-observacion').click(function(){
                $('#ingresar-observaciones').modal('hide');
            });

            $('.aprobar').click(function(){
                fila_seleccionada = $(this).attr('data-row');
                $('#notificacion-general-Label').html('Confirmar Aprobaci&oacute;n');
                $('#notificacion-general-body').html(
                    '<div class="col-lg-12 text-center">\
                        <h4>¿Est&aacute; seguro que desea aprobar el informe de inspecci&oacute;n?</h4>\
                    </div>'
                );
                $("#notificacion-general-footer").html(
                    '<div class="col-xs-6" data-dismiss="modal">\
                        <a href="#" id="boton-rechazar-inspeccion" class="btn btn-danger col-xs-12">Cancelar</a>\
                    </div>\
                    <div class="col-xs-6" data-dismiss="modal">\
                        <a href="#" id="boton-aprobar-inspeccion" class="btn btn-primary col-xs-12">Aceptar</a>\
                    </div>'
                );
                $('#notificacion-general').modal({
                    keyboard: false,
                    backdrop: 'static'
                });
            });

            $('.otorgar-credenciales').click(function(){
                fila_seleccionada = $(this).attr('data-row');
                $('#notificacion-general-Label').html('Confirmar Aprobaci&oacute;n');
                $('#notificacion-general-body').html(
                    '<div class="col-lg-12 text-center">\
                        <h4>¿Est&aacute; seguro que desea otorgar credenciales para los inspectores seleccionado?</h4>\
                    </div>'
                );
                $("#notificacion-general-footer").html(
                    '<div class="col-xs-6" data-dismiss="modal">\
                        <a href="#" id="boton-cancelar" class="btn btn-danger col-xs-12">Cancelar</a>\
                    </div>\
                    <div class="col-xs-6" data-dismiss="modal">\
                        <a href="#" id="boton-aceptar" class="btn btn-primary col-xs-12">Aceptar</a>\
                    </div>'
                );
                $('#notificacion-general').modal({
                    keyboard: false,
                    backdrop: 'static'
                });
            });

            $('.devolver-observaciones').click(function(){
                fila_seleccionada = $(this).attr('data-row');
                $('#notificacion-general-Label').html('Confirmar solicitud de inspecci&oacute;n');
                $('#notificacion-general-body').html(
                    '<div class="col-lg-12 text-center">\
                        <h4>¿Est&aacute; seguro de desea devolver la solicitud a los inspectores asignados?</h4>\
                    </div><div>\
                    <br><p>Observaciones</p>\
                    <textarea id="comentario-ingresado" placeholder="Ingrese aqu&iacute; sus comentarios" class="form-control" rows="10" style="width:100%; height:100%;"></textarea> \
                    </div></div>'
                );
                $('#notificacion-general-footer').html(
                    '<div class="col-xs-6" data-dismiss="modal">\
                        <a href="#" id="boton-rechazar-documento" class="btn btn-danger col-xs-12">Cancelar</a>\
                    </div>\
                    <div class="col-xs-6" data-dismiss="modal">\
                        <a href="#" id="boton-aceptar-documento" class="btn btn-primary col-xs-12">Aceptar</a>\
                    </div>'
                );
                $('#notificacion-general').modal({
                    keyboard: false,
                    backdrop: 'static'
                });
            });

            $('#activar_buscar_modal').click(function(){
                $('#buscar_col_2').html('');
                $('#buscar_col_2').append(
                    '<div class="row">\
                        <div class="col-xs-12">\
                            <label class="labelmodal">Inspector</label>\
                            <select name="inspector" class="select">\
                                <option value="">Seleccione</option>\
                            </select>\
                        </div>\
                    </div>'
                );
                $('#buscar_modal').modal();
            });

        });
    </script>
{% endblock %}