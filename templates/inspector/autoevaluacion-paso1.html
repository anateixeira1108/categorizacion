{% extends "base.html" %}

{% block main_content %}
    <!-- Right side column. Contains the navbar and content of the page -->
    <aside class="right-side">
        <!-- Main content -->

        <section class="content-header">
          <h1>Categorizaci&oacute;n <small>Evaluaci&oacute;n PST</small></h1>
            <ol class="breadcrumb">
                <li><a href="/"> Inicio</a></li>
                <li><a href="{% url 'despachador_raiz' 'inspector' 'bandeja.html' %}"><i class="fa fa-star-half-o"></i>Categorizaci&oacute;n</a></li> 
                <li><a href="{% url 'despachador_raiz' 'inspector' 'ver_requisitos.html' %}"><i class="fa fa-file-text-o"></i>Requitos Inspector</a></li> 
                <li class="active"><i class="fa fa-file-text-o"></i> Evaluaci&oacute;n PST</li>
            </ol>

        </section>
         <section class="content">
            <div class="box box-danger">
                <div class="box-body">
                    <div class="body">
                    <form>
                       
                        <div class="row">
                            <div class="col-xs-7">
                                <h3>Hotel XYZ&nbsp;<small>Hotel Turismo</small></h3>
                            </div>
                        
                            <div class="col-xs-1 margin-combo"> Proceso </div>
                            <div class="col-xs-4 margin-combo">
                                    <select class="select" onchange="location = this.options[this.selectedIndex].value;">
                                        <option disabled="disabled" class="en-option" value="#" selected>Paso 1:Entorno F&iacute;sico</option>
                                        <option class="en-option" value="{% url 'despachador_raiz' 'inspector' 'autoevaluacion-paso2.html' %}">Paso 2: Edificaci&oacute;n</option>
                                        <option disabled="disabled" class="dis-option" value="#">Paso 3: Administrativo</option>
                                        <option disabled="disabled" class="dis-option" value="#">Paso 4: Servicios Complementarios</option>
                                        <option disabled="disabled" class="dis-option" value="#">Paso 5: Gesti&oacute;n Ambiental</option>
                                    </select>
                                
                                
                            </div>
                        </div>
                        <div class="seccion-actual">
                                Localizaci&oacute;n
                                &nbsp;<i class="fa fa-angle-right"></i>&nbsp;
                                Accesibilidad
                        </div>
                        <div class="row item-autoevaluacion">
                            
                                <div class="col-lg-10 col-md-9 col-sm-4">
                                    <label id="label_1-1-1" class="etiqueta-autoevaluacion">Vialidad</label>
                                </div>
                                <div class="col-lg-1 col-md-2 col-sm-4">
                                    <select name="accesibilidad" class="item-select">
                                        <option value="0">Sí</option>
                                        <option value="1">No</option>
                                        <option value="2">N/A</option>
                                    </select>
                                </div>
                                <!-- <div class="col-lg-1 col-md-2 col-sm-4">
                                    <i class="fa fa-camera fa-lg"></i>
                                </div> -->
                                <div id="accesibilidad" class="col-lg-1 col-md-1 col-sm-0 contenido-centrado icono-control">
                                    <i class="fa fa-minus fa-2x icono-accion"></i>
                                </div>
                            
                        </div>

                        <div id="accesibilidad_subitem" class="sub-item">
                            <div class="row">
                                <div class="col-lg-1 col-lg-offset-11 col-xs-2 col-xs-offset-10 contenido-centrado">
                                    <i data-tooltip="Observaciones" class="fa fa-list fa-lg icono-accion"></i> &nbsp;&nbsp;
                                    <i class="fa fa-camera fa-lg icono-accion activar-modal"></i>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-1" id="label_1-1-1-1" class="etiqueta-autoevaluacion">Pavimentada</label>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 radio-item">
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-1-1"/>&nbsp; Bueno</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-1-1"/>&nbsp; Deficiente</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-1-1"/>&nbsp; N/A</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-1" id="label_1-1-1-3" class="etiqueta-autoevaluacion">Sin huecos</label>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 radio-item">
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-1-3"/>&nbsp; Bueno</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-1-3"/>&nbsp; Deficiente</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-1-3"/>&nbsp; N/A</div>
                                </div>
                            </div>
                        </div>

                        <div class="row item-autoevaluacion">
                            
                                <div class="col-lg-10 col-md-9 col-sm-4">
                                    <label id="label_1-1-2" class="etiqueta-autoevaluacion">Aceras o accesos peatonales</label>
                                </div>
                                <div class="col-lg-1 col-md-2 col-sm-4">
                                    <select name="aceras" class="item-select">
                                        <option value="0">Sí</option>
                                        <option value="1">No</option>
                                        <option value="2">N/A</option>
                                    </select>
                                </div>
                                <!-- <div class="col-lg-1 col-md-2 col-sm-4">
                                    <i class="fa fa-camera fa-lg"></i>
                                </div> -->
                                <div id="aceras" class="col-lg-1 col-md-1 col-sm-0 contenido-centrado icono-control">
                                    <i class="fa fa-minus fa-2x icono-accion"></i>
                                </div>
                            
                        </div>

                        <div id="aceras_subitem" class="sub-item">
                            <div class="row">
                                <div class="col-lg-1 col-lg-offset-11 col-xs-2 col-xs-offset-10 contenido-centrado">
                                    <i data-tooltip="Observaciones" class="fa fa-list fa-lg icono-accion"></i> &nbsp;&nbsp;
                                    <i class="fa fa-camera fa-lg icono-accion activar-modal"></i>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-2" id="label_1-1-2-1" class="etiqueta-autoevaluacion">Normativa legal</label>
                                </div>
                                <div class="col-lg-1 col-md-2 col-sm-4">
                                    <select class="item-select" name="1-1-2-1">
                                        <option value="0">Sí</option>
                                        <option value="1">No</option>
                                        <option value="2">N/A</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-2" id="label_1-1-2-2" class="etiqueta-autoevaluacion">Ancho de 1,60 mt</label>
                                </div>
                                <div class="col-lg-1 col-md-2 col-sm-4">
                                    <select class="item-select" name="1-1-2-2">
                                        <option value="0">Sí</option>
                                        <option value="1">No</option>
                                        <option value="2">N/A</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-2" id="label_1-1-2-3" class="etiqueta-autoevaluacion">Libre de obst&aacute;culos</label>
                                </div>
                                <div class="col-lg-1 col-md-2 col-sm-4">
                                    <select class="item-select" name="1-1-2-3">
                                        <option value="0">Sí</option>
                                        <option value="1">No</option>
                                        <option value="2">N/A</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-2" id="label_1-1-2-4" class="etiqueta-autoevaluacion">Rampa de acceso</label>
                                </div>
                                <div class="col-lg-1 col-md-2 col-sm-4">
                                    <select class="item-select" name="1-1-2-4">
                                        <option value="0">Sí</option>
                                        <option value="1">No</option>
                                        <option value="2">N/A</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-2" id="label_1-1-2-5" class="etiqueta-autoevaluacion">Limpias</label>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 radio-item">
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-2-5"/>&nbsp; Bueno</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-2-5"/>&nbsp; Deficiente</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-2-5"/>&nbsp; N/A</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-2" id="label_1-1-2-6" class="etiqueta-autoevaluacion">Sin huecos</label>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 radio-item">
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-2-6"/>&nbsp; Bueno</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-2-6"/>&nbsp; Deficiente</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-2-6"/>&nbsp; N/A</div>
                                </div>
                            </div>
                        </div>

                        <div class="row item-autoevaluacion">
                            
                                <div class="col-lg-10 col-md-9 col-sm-4">
                                    <label id="label_1-1-3" class="etiqueta-autoevaluacion">Servicio de transporte</label>
                                </div>
                                <div class="col-lg-1 col-md-2 col-sm-4">
                                    <select name="transporte" class="item-select">
                                        <option value="0">Sí</option>
                                        <option value="1">No</option>
                                        <option value="2">N/A</option>
                                    </select>
                                </div>
                                <!-- <div class="col-lg-1 col-md-2 col-sm-4">
                                    <i class="fa fa-camera fa-lg"></i>
                                </div> -->
                                <div id="transporte" class="col-lg-1 col-md-1 contenido-centrado icono-control">
                                    <i class="fa fa-minus fa-2x icono-accion"></i>
                                </div>
                            
                        </div>

                        <div id="transporte_subitem" class="sub-item" >
                            <div class="row">
                                <div class="col-lg-1 col-lg-offset-11 col-xs-2 col-xs-offset-10 contenido-centrado">
                                    <i data-tooltip="Observaciones" class="fa fa-list fa-lg icono-accion"></i> &nbsp;&nbsp;
                                    <i class="fa fa-camera fa-lg icono-accion activar-modal"></i>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-3" id="label_1-1-3-1" class="etiqueta-autoevaluacion">Carrocer&iacute;a</label>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 radio-item">
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-1"/>&nbsp; Bueno</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-1"/>&nbsp; Deficiente</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-1"/>&nbsp; N/A</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-3" id="label_1-1-3-2" class="etiqueta-autoevaluacion">Parte interna</label>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 radio-item">
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-2"/>&nbsp; Bueno</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-2"/>&nbsp; Deficiente</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-2"/>&nbsp; N/A</div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-5 col-md-5 col-sm-4">
                                    <label parent-id="1-1-3" id="label_1-1-3-3" class="etiqueta-autoevaluacion">Caucho</label>
                                </div>
                                <div class="col-lg-7 col-md-7 col-sm-7 radio-item">
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-3" value="trans-1"/>&nbsp; Bueno</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-3" value="trans-2"/>&nbsp; Deficiente</div>
                                    <div class="col-lg-3"><input class="input-item" type="radio" name="1-1-3-3" value="trans-3"/>&nbsp; N/A</div>
                                </div>
                            </div>
                        </div>

                        </form>
                    </div>
                </div>
            </div>

            <div class="save-bar col-lg-12 col-md-12">
                <div class="col-xs-3">                    
                    <a class="btn btn-primary col-lg-12 col-md-12" href="{% url 'despachador_raiz' 'inspector' 'ver_requisitos.html' %}">
                        <i class="fa fa-arrow-left "></i> &nbsp;&nbsp;Anterior
                    </a>
                </div>
                <div class="col-xs-3">
                    <a id="obervaciones_generales" class="btn btn-info col-xs-12" href="#">
                        <i class="fa fa-list"></i> &nbsp;&nbsp;Observaciones
                    </a>
                </div>
                <div class="col-xs-3">                    
                    <a class="btn btn-info col-lg-12 col-md-12 guardar" href="#">
                        <i class="fa fa-save"></i> &nbsp;&nbsp;Guardar
                    </a>
                </div>
                <div class="col-xs-3">
                    <a class="btn btn-primary col-lg-12 col-md-12" href="{% url 'despachador_raiz' 'inspector' 'autoevaluacion-paso2.html' %}">
                        <i class="fa fa-arrow-right "></i> &nbsp;&nbsp;Siguiente
                    </a>
                </div>
            </div>

        </section>
        
    </aside>

<!-- ~~~~~~~~ Modales utilizadas ~~~~~~~~ -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel">Cargar im&aacute;genes</h4>
                </div>
                
                <div class="modal-body">
                    <div class="col-lg-4 col-md-4 col-xs-6 thumb image-container">
                        <div class="thumbnail">
                            <img class="img-responsive" src="{{STATIC_URL}}img/img-400x300.gif" alt="test">
                        </div>
                        <div class="caption text-center center-block">
                            <p id="Dimg" data-toggle="tooltip" title="Vialidad" class="col-lg-12">Vialidad</p>
                            <div class="col-lg-12">
                                <a href="#" class="btn btn-primary">Subir</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-xs-6 thumb image-container">
                        <div class="thumbnail">
                            <img class="img-responsive" src="{{STATIC_URL}}img/img-400x300.gif" alt="test">
                        </div>
                        <div class="caption text-center center-block">
                            <p id="Dimg" data-toggle="tooltip" title="Aceras o accesos peatonales" class="col-lg-12">Aceras o accesos peatonales</p>
                            <div class="col-lg-12">
                                <a href="#" class="btn btn-primary">Subir</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4 col-md-4 col-xs-6 thumb image-container">
                        <div class="thumbnail">
                            <img class="img-responsive" src="{{STATIC_URL}}img/img-400x300.gif" alt="test">
                        </div>
                        <div class="caption text-center center-block">
                            <p id="Dimg" data-toggle="tooltip" title="Servicio de transporte" class="col-lg-12">Servicio de transporte</p>
                            <div class="col-lg-12">
                                <a href="#" class="btn btn-primary">Subir</a>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <div class="col-xs-6" data-dismiss="modal">
                        <a href="#" data-dismiss="modal" class="btn btn-danger col-xs-12">Cancelar</a>
                    </div>
                    <div class="col-xs-6" data-dismiss="modal">
                        <a href="#" data-dismiss="modal" class="btn btn-primary col-xs-12">Aceptar</a>
                    </div>
                </div>

            </div>
        </div>
    </div>


{% include '_modales_categorizacion.html' %}
{% endblock %}

{% block javascripts %}
    {{ block.super }}
    <script type="application/javascript">
        $(function() {            
           
            var comentarios_json = '{"observaciones":{}}';
            comentarios_json = JSON.parse(comentarios_json);
            console.log(comentarios_json);
            $(".guardar").each(function(){                
                $(this).click(function(){
                   $('#notificacion-guardado').modal();
                });
            }); 

            $('#obervaciones_generales').click(function(){
                $('#ingresar-observaciones').modal({
                    keyboard: false,
                    backdrop: 'static'
                });
            });

            $('.input-item').on('ifClicked', function(event){
                /*var name_separado = new Array();*/
                name = $(this).attr('name');
                /*name_separado = $(this).attr('name').split('-');*/
                item_padre = $('#label_'+name).attr('parent-id');
                nombre_comentario = $('#label_'+item_padre).text() + ' - ' + $('#label_'+name).text();
                
                if(!$('#observacion_'+name).length>0){
                   comentarios_json.observaciones[name] = '';
                   console.log(comentarios_json.observaciones.length);
                    $('#observaciones_body #accordion').append(
                        '<div class="panel panel-default">\
                            <div class="panel-heading">\
                                <a data-toggle="collapse" data-parent="#accordion"  href="#accordion_'+name+'">\
                                    '+nombre_comentario+'\
                                </a>\
                            </div>\
                            <div id="accordion_'+name+'" class="panel-collapse collapse in">\
                                <div class="panel-body">\
                                    <textarea id="observacion_'+name+'" class="col-xs-12"></textarea>\
                                </div>\
                            </div>\
                        </div>'
                    );
                    $('#accordion_'+name).collapse('hide');
                }
            });

            $('.item-select').change(function(){
                /*var name_separado = new Array();*/
                name = $(this).attr('name');
                /*name_separado = $(this).attr('name').split('-');*/
                item_padre = $('#label_'+name).attr('parent-id');
                nombre_comentario = $('#label_'+item_padre).text() + ' - ' + $('#label_'+name).text();
                
                if(!$('#observacion_'+name).length>0){
                   comentarios_json.observaciones[name] = '';
                   console.log(comentarios_json.observaciones.length);
                    $('#observaciones_body #accordion').append(
                        '<div class="panel panel-default">\
                            <div class="panel-heading">\
                                <a data-toggle="collapse" data-parent="#accordion"  href="#accordion_'+name+'">\
                                    '+nombre_comentario+'\
                                </a>\
                            </div>\
                            <div id="accordion_'+name+'" class="panel-collapse collapse in">\
                                <div class="panel-body">\
                                    <textarea id="observacion_'+name+'" class="col-xs-12"></textarea>\
                                </div>\
                            </div>\
                        </div>'
                    );
                    $('#accordion_'+name).collapse('hide');
                }
            })

            $('.fa-list').click(function(){
                $('#modal_observaciones').modal();
            });

            $("#modal_observaciones").on('hide.bs.modal', function (e) {
                for (var key in comentarios_json.observaciones) {
                    comentarios_json.observaciones[key] = $('#observacion_'+key).val();
                    $('#accordion_'+key).collapse('hide');
                }
                console.log(comentarios_json);
            });
      
        });
    </script>
{% endblock %}