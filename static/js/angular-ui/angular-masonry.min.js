/*!
 * angular-masonry 0.2.0
 * Pascal Hartig, weluse GmbH, http://weluse.de/
 * License: MIT
 */
!function(){"use strict";angular.module("wu.masonry",[]).controller("MasonryCtrl",function(a,b,c){function d(){g||(g=!0,c(function(){g=!1,b.masonry("layout")},0))}function e(a){a.addClass("loaded")}var f={},g=!1,h=!1;this.appendBrick=function(a,g){function i(){0===Object.keys(f).length&&c(function(){b.masonry("resize")}),void 0===f[g]&&(e(a),f[g]=!0,b.masonry("appended",a,!0),d())}h||a.imagesLoaded(i)},this.removeBrick=function(a,c){h||(delete f[a],b.masonry("remove",c),d())},this.destroy=function(){h=!0,b.data("masonry")&&b.masonry("destroy"),f=[]}}).directive("masonry",function(){return{restrict:"AE",controller:"MasonryCtrl",link:function(a,b,c,d){var e=a.$eval(c.options),f=angular.extend(e||{},{itemSelector:c.itemSelector||".masonry-brick",columnWidth:c.columnWidth});b.masonry(f),a.$on("$destroy",d.destroy)}}}).directive("masonryBrick",function(){return{restrict:"AC",require:"^masonry",link:function(a,b,c,d){var e=a.$id;d.appendBrick(b,e),a.$on("$destroy",function(){d.removeBrick(e,b)})}}})}();